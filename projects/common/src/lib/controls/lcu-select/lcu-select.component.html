<form
  [formGroup]="Form"
  novalidate
  fxLayout="column">
  <mat-form-field>
    <mat-select
      [placeholder]="SelectControl.invalid ? 'Select Condition Variables' : ''"
      formControlName="selectFormControl"
      [multiple] = "Config.MultiSelect.Enable"
      (openedChange)="OpenedChangeHandler($event)">

      <!--This tells us the first item and how many additional items are selected-->
        <mat-select-trigger *ngIf="SelectControl.value?.length">
            {{ SelectControl.value?.length > 0 ? SelectControl.value[0]['Key'] : '' }}
            <span *ngIf="SelectControl.value?.length > 1">
                (+{{SelectControl.value?.length - 1}} others)
            </span>
        </mat-select-trigger>

      <!--'Select All' option with divider-->
        <mat-option *ngIf="Config.MultiSelect.SelectAll"
          #SelectAllOptionControl [value]="SelectAllObj"
          (click)="SelectAllHandler($event, SelectAllObj['Key'])">{{ SelectAllObj['Key'] }}
        </mat-option>
        <mat-divider style="margin-bottom: 10px"></mat-divider>

       <!--All other selectable options-->
        <mat-option *ngFor="let option of Config.Source" [value]="option"
          (click)="SelectOptionsHandler($event, option['Key'])">{{ option['Key'] }}
        </mat-option>

    </mat-select>
    <mat-hint *ngIf="SelectControl.valid">Selected Condition Variables</mat-hint>
    <mat-error *ngIf="SelectControl.hasError('required')">Condition variables are required</mat-error>
  </mat-form-field>
</form>
